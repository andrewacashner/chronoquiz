{"ast":null,"code":"import{useContext,useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import UserContext from\"../store/UserContext\";import User from\"../classes/User\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TimelineList(_ref){let{data,type=\"game\",updateFn=null}=_ref;let userContext=useContext(UserContext);let userToken=userContext.get.userToken;let authenticated=userContext.get.authenticated;function AdminLink(_ref2){let{entry}=_ref2;let[isButtonShown,setIsButtonShown]=useState(false);let listButtonVisibility=isButtonShown?\"show\":\"hide\";const showButton=()=>setIsButtonShown(true);const hideButton=()=>setIsButtonShown(false);function DeleteButton(){let[itemToDelete,setItemToDelete]=useState(null);function deleteItem(event){setItemToDelete(entry);console.log(\"Deleting item with date \".concat(entry.date));}useEffect(()=>{async function sendDeleteRequest(item,token){let response=await fetch(\"\".concat(User.SERVER,\"/timelines/\").concat(item.id,\"/\"),{method:\"DELETE\",headers:new Headers({\"Authorization\":\"Token \".concat(token)})});if(response.ok){let json=await response.json();console.debug(json);updateFn(true);}else{console.debug(\"Could not delete timeline with id \".concat(item.id));}}if(authenticated&&itemToDelete===entry){if(window.confirm(\"Are you sure you want to delete this quiz? (This action cannot be undone.)\")){sendDeleteRequest(itemToDelete,userToken);setItemToDelete(null);}}},[itemToDelete]);return/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:listButtonVisibility,onClick:deleteItem,children:\"\\uD83D\\uDDD9\"});}let href=\"../game/\".concat(entry.id);return/*#__PURE__*/_jsxs(\"li\",{onMouseEnter:showButton,onMouseLeave:hideButton,children:[/*#__PURE__*/_jsx(Link,{to:href,children:entry.title}),/*#__PURE__*/_jsx(DeleteButton,{})]},entry.id);}function GameLink(_ref3){var _entry$creator;let{entry}=_ref3;let href=\"../game/\".concat(entry.id);let creator=(_entry$creator=entry.creator)!==null&&_entry$creator!==void 0?_entry$creator:entry.user.username;return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:href,children:[entry.title,\" (\",/*#__PURE__*/_jsx(\"code\",{children:creator}),\")\"]})},entry.id);}let ThisLink=type===\"admin\"?AdminLink:GameLink;return/*#__PURE__*/_jsx(\"ul\",{children:data.map(item=>/*#__PURE__*/_jsx(ThisLink,{entry:item},item.id))});}","map":{"version":3,"names":["useContext","useState","useEffect","Link","UserContext","User","jsx","_jsx","jsxs","_jsxs","TimelineList","_ref","data","type","updateFn","userContext","userToken","get","authenticated","AdminLink","_ref2","entry","isButtonShown","setIsButtonShown","listButtonVisibility","showButton","hideButton","DeleteButton","itemToDelete","setItemToDelete","deleteItem","event","console","log","concat","date","sendDeleteRequest","item","token","response","fetch","SERVER","id","method","headers","Headers","ok","json","debug","window","confirm","className","onClick","children","href","onMouseEnter","onMouseLeave","to","title","GameLink","_ref3","_entry$creator","creator","user","username","ThisLink","map"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/chronoquiz/src/components/TimelineList.tsx"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport UserContext from \"../store/UserContext\";\nimport User from \"../classes/User\";\n\nexport default function TimelineList({ data, type = \"game\", updateFn = null }) {\n  let userContext = useContext(UserContext);\n  let userToken =  userContext.get.userToken;\n  let authenticated = userContext.get.authenticated;\n\n\n  function AdminLink({ entry }) {\n    let [isButtonShown, setIsButtonShown] = useState(false);\n\n    let listButtonVisibility = isButtonShown ? \"show\" : \"hide\";\n\n    const showButton = () => setIsButtonShown(true);\n    const hideButton = () => setIsButtonShown(false);\n\n    function DeleteButton() {\n\n      let [itemToDelete, setItemToDelete] = useState(null)\n\n      function deleteItem(event) {\n        setItemToDelete(entry)\n        console.log(`Deleting item with date ${entry.date}`);\n      }\n\n      useEffect(() => {\n        async function sendDeleteRequest(item, token) {\n          let response = await fetch(`${User.SERVER}/timelines/${item.id}/`, {\n            method: \"DELETE\",\n            headers: new Headers({\n              \"Authorization\": `Token ${token}`\n            })\n          });\n\n          if (response.ok) {\n            let json = await response.json();\n            console.debug(json);\n            updateFn(true);\n          } else {\n            console.debug(`Could not delete timeline with id ${item.id}`);\n          }\n        }\n\n        if (authenticated && itemToDelete === entry) {\n          if (window.confirm(\"Are you sure you want to delete this quiz? (This action cannot be undone.)\")) {\n            sendDeleteRequest(itemToDelete, userToken);\n            setItemToDelete(null);\n          }\n        }\n      }, [itemToDelete])\n\n      return(\n        <button type=\"button\" \n          className={listButtonVisibility} \n          onClick={deleteItem}>ðŸ—™</button>\n      );\n    }\n\n    let href = `../game/${entry.id}`;\n\n    return(\n      <li key={entry.id} onMouseEnter={showButton} onMouseLeave={hideButton}>\n        <Link to={href}>{entry.title}</Link>\n        <DeleteButton />\n      </li>\n    );\n  }\n  \n  function GameLink({ entry }) {\n    let href = `../game/${entry.id}`;\n    let creator = entry.creator ?? entry.user.username;\n    return(\n      <li key={entry.id}>\n        <Link to={href}>{entry.title} (<code>{creator}</code>)</Link>\n      </li>\n    );\n  }\n\n  let ThisLink = type === \"admin\" ? AdminLink : GameLink;\n\n  return(\n    <ul>\n      {data.map(item => <ThisLink key={item.id} entry={item} />)}\n    </ul>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}